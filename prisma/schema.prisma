generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Truck {
  id                    String   @id @default(cuid())
  name                  String
  modelCode             String?  @unique
  type                  String?
  size                  String?
  actualPrice           Decimal? @db.Decimal(10, 2)
  regularPrice          Decimal? @db.Decimal(10, 2)
  description           String?
  images                String[]
  videoUrl              String?
  concessionFeatures    Json?
  specialSpecifications String[] @default([])
  additionalOptions     Json?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("trucks")
}

model BuildRequest {
  id                    String   @id @default(cuid())
  trailerSize           String
  porchConfiguration    String?
  rangeHood             String
  fireSuppressionSystem String
  flatTopGriddle        String?
  charbroiler           String?
  deepFryer             String?
  range                 String?
  steamWell             String?
  warmingCabinet        String?
  refrigeration         String[]
  additionalInfo        String?
  exteriorColor         String
  interiorFinish        String
  budget                String
  needFinancing         String
  firstName             String
  lastName              String
  email                 String
  phoneNumber           String
  address               String?
  zipcode               String
  paymentMethods        String   @default("financing")
  totalPrice            Decimal? @db.Decimal(10, 2)
  status                String   @default("pending")
  notes                 String?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("build_requests")
}

model Order {
  id              String   @id @default(cuid())
  orderNumber     String   @unique @default(cuid())

  // User Information
  firstName       String
  lastName        String
  email           String
  phone           String
  address         String
  city            String
  state           String
  zipCode         String

  // Truck Information
  truckName       String
  truckSize       String
  truckType       String?
  truckImage      String
  truckImages     String[] @default([])
  upgrades        Json?    // Selected upgrades with name and price

  // Pricing
  price           Decimal  @db.Decimal(10, 2)
  tax             Decimal? @db.Decimal(10, 2)
  total           Decimal  @db.Decimal(10, 2)

  // Payment
  paymentMethod   String
  paymentStatus   String   @default("pending")

  // Order Status
  status          String   @default("pending")
  notes           String?

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("orders")
}
